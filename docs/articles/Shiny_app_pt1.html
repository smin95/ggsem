<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>1. Drawing Elements • ggsem</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="1. Drawing Elements">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggsem</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/smin95/ggsem">GitHub</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>1. Drawing Elements</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/smin95/ggsem/blob/HEAD/vignettes/Shiny_app_pt1.Rmd" class="external-link"><code>vignettes/Shiny_app_pt1.Rmd</code></a></small>
      <div class="d-none name"><code>Shiny_app_pt1.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="launching-the-app">Launching the app<a class="anchor" aria-label="anchor" href="#launching-the-app"></a>
</h2>
<p>To begin with, we can launch the <code>ggsem</code> Shiny app on the
browser using this link: <a href="https://smin95.shinyapps.io/ggsem_shiny/" class="external-link uri">https://smin95.shinyapps.io/ggsem_shiny/</a>.</p>
<p>It can also be started locally in RStudio. First, install the package
from my Github repository.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'smin95/ggsem'</span><span class="op">)</span></span></code></pre></div>
<p>Then, run the app using the code below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggsem</span><span class="fu">::</span><span class="fu"><a href="../reference/launch.html">launch</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="the-apps-layout">The app’s layout<a class="anchor" aria-label="anchor" href="#the-apps-layout"></a>
</h3>
<p><img src="layout1.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
<p>The picture shows the <code>ggsem</code> app. On the left side, there
is a menu. It begins with a dropdown menu for <strong>Element
Selection</strong>, allowing users to choose the type of graphical
elements to add on the plotting space (inside the purple box). There are
five options for <strong>Element Selection</strong>:
<strong>Point</strong>, <strong>Line</strong>, <strong>Text
Annotation</strong>, <strong>Self-loop Arrow</strong>, and
<strong>Lavaan Input</strong>.</p>
<p>Below <strong>Element Selection</strong>, users can select the order
of the layer in how the graphical elements are displayed (inside the
blue box). The default is set so that points are most at the front. In
other words, when a line and a point overlap, a point will mask the
line.</p>
<p>Next, there is a slider for <strong>Zoom Level</strong> (within the
green box). The default is set to a factor of 1.2x but it can be
increased to zoom out (all the way to a factor of 10).</p>
<p>Then, there are sliders for <strong>Horizontal Position</strong> and
<strong>Vertical Position</strong> (in the green box). This changes the
focus of the plotting space that is displayed. For instance, if a point
is cutoff on the right side of the plotting space because the space is
not enough, simply adjust the slider for <strong>Horizontal
Position</strong>.</p>
<p>Furthermore, there are <strong>Undo</strong> and
<strong>Redo</strong> buttons (in the yellow box). These correspond to
CTRL + Z and CTRL + Y. respectively. To illustrate, if you have
accidently deleted a line, then simply click the <strong>Undo</strong>
button to cancel the most previous action. The app remembers all steps
of inputs, so <strong>Undo</strong> button can work all the way back to
the beginning.</p>
<p>Finally, there’s space where plots are rendered (red box). Without
further ado, let’s add graphical elements and see how these options
interact together.</p>
</div>
</div>
<div class="section level2">
<h2 id="adding-elements">Adding Elements<a class="anchor" aria-label="anchor" href="#adding-elements"></a>
</h2>
<div class="section level3">
<h3 id="adding-points">Adding Points<a class="anchor" aria-label="anchor" href="#adding-points"></a>
</h3>
<p><img src="added_point.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
<p>Lets begin by adding a point. The default coordinate of its X and Y
position corresponds to the origin (0, 0). After a point is created,
users can hover their mouse point on the point and realize that the
center of the point is at X = 0 and Y = 0, as shown on the bottomleft of
the plotting space.</p>
<p>Users can provide several inputs to specify the aesthetics of the
point. This includes not only its X and Y coordinates, but also its
filling color (<strong>Point Color</strong>), shape (<strong>Select
Shape</strong>), size (<strong>Point Size</strong>), width of the border
(<strong>Border Width</strong>), color of the border (<strong>Border
Color</strong>), alpha level (<strong>Point Alpha</strong>).</p>
<p>Here, We can draw a square point by setting the inputs as shown
below:</p>
<ol style="list-style-type: decimal">
<li>
<strong>X Coordinate</strong>: 5</li>
<li>
<strong>Y Coordinate</strong>: 5</li>
<li>
<strong>Point Color</strong>: #D0C5ED</li>
<li>
<strong>Select Shape</strong>: <em>square</em>
</li>
<li>
<strong>Point Size</strong>: 50</li>
<li>
<strong>Border Width</strong>: 2</li>
<li>
<strong>Border Color</strong>: #9646D4</li>
<li>
<strong>Point Alpha</strong>: 1</li>
</ol>
<p>After these have been specified, please click the <strong>Add
Point</strong> button (pink box) to render the output. If you make any
mistakes, you can click the <strong>Undo</strong> button to cancel the
changes.</p>
<p><img src="add_point.png" width="35%" style="display: block; margin: auto auto auto 0;"></p>
</div>
<div class="section level3">
<h3 id="adding-lines">Adding Lines<a class="anchor" aria-label="anchor" href="#adding-lines"></a>
</h3>
<p><img src="table_green.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
<p>Next, we will add a line by selecting <em>Line</em> in the dropdown
menu of <strong>Choose Element Type</strong>.</p>
<p>There are numerous parameters of aesthetics that users can specify.
We can start by drawing a black line with these coordinates (and leave
all other default inputs unchanged):</p>
<ol style="list-style-type: decimal">
<li>
<strong>Start X Coordinate</strong>: 2</li>
<li>
<strong>Start Y Coordinate</strong>: -2</li>
<li>
<strong>End X Coordinate</strong>: 8</li>
<li>
<strong>End Y Coordinate</strong>: -2</li>
</ol>
<p>After the <strong>Add Line</strong> button has been clicked, a line
will be drawn below the purple square (as shown in the picture above).
Also, users can delete elements by interacting with the table. Simply
click a row of interest, and click the <strong>Delete Selected
Point</strong> (in the green box). This line has a single color, as
specified in the dropdown menu <strong>Line Color Type</strong>.</p>
<p>Next, we will draw a curved line, whose curvature is automatically
adjusted based on the X and Y coordinates of the line segment but it can
be manually adjusted by controlling <strong>Control Point X</strong> and
<strong>Control Point Y</strong>. Additionally, we can set it to have a
gradient between two colors by setting it as <em>Gradient</em>. After we
choose <em>Gradient</em>, a conditional color menu will appear
(<strong>End Color</strong>), as well as <strong>Gradient
Intersection</strong>, which is a slider that allows us to give a fine
control of where the gradient occurs in the line segment’s length.</p>
<ol style="list-style-type: decimal">
<li>
<strong>Start X Coordinate</strong>: 2</li>
<li>
<strong>Start Y Coordinate</strong>: 12</li>
<li>
<strong>End X Coordinate</strong>: 8</li>
<li>
<strong>End Y Coordinate</strong>: 12</li>
<li>
<strong>Start Color</strong>: #F57373</li>
<li>
<strong>Line Color Type</strong>: <em>Gradient</em>
</li>
<li>
<strong>End Color</strong>: #53F26D</li>
<li>
<strong>Gradient Intersection</strong>: 0.5</li>
<li>
<strong>Line Width</strong>: 2</li>
<li>
<strong>Line Alpha</strong>: 1</li>
<li>
<strong>Line Type</strong>: <em>Curved Line</em>
</li>
</ol>
<p>If gradient intersection is either close to 0 or 1, then it will
display one color more than the other. For instance, if its set to 0.01,
the *End COlor** will dominate the line segment.</p>
<p><img src="green_red_line.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<p>Next, we will add an arrow by setting the dropdown menu <strong>Line
Type</strong> as <em>Straight Arrow</em>, with these parameters
below:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Start X Coordinate</strong>: 18</li>
<li>
<strong>Start Y Coordinate</strong>: 5</li>
<li>
<strong>End X Coordinate</strong>: 12</li>
<li>
<strong>End Y Coordinate</strong>: 5</li>
<li>
<strong>Start Color</strong>: #9E9E9E</li>
<li>
<strong>Line Color Type</strong>: <em>Gradient</em>
</li>
<li>
<strong>End Color</strong>: #54F5AF</li>
<li>
<strong>Gradient Intersection</strong>: 0.2</li>
<li>
<strong>Line Width</strong>: 2</li>
<li>
<strong>Line Alpha</strong>: 1</li>
<li>
<strong>Line Type</strong>: <em>Straight Arrow</em>
</li>
</ol>
<p><img src="green_grey_line.png" width="50%" style="display: block; margin: auto auto auto 0;"></p>
<p>Leave the other inputs as intact, such as <strong>Arrow Type</strong>
(<em>open</em> or <em>closed</em> arrowheads) and <strong>Arrow
Size</strong> (size of the arrow head).</p>
</div>
<div class="section level3">
<h3 id="adding-text-annotations">Adding Text Annotations<a class="anchor" aria-label="anchor" href="#adding-text-annotations"></a>
</h3>
<p><img src="add_text.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<p>Now, we will add a text annotation beside the end of the arrow,
labelled as “Square One” using these inputs below:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Text</strong>: Square One</li>
<li>
<strong>X Coordinate</strong>: 26</li>
<li>
<strong>Y Coordinate</strong>: 5</li>
<li>
<strong>Font</strong>: <em>Arial</em>
</li>
<li>
<strong>Text Size</strong>: 20</li>
<li>
<strong>Color</strong>: #000000</li>
<li>
<strong>Angle (deg)</strong>: 0</li>
<li>
<strong>Text Alpha</strong>: 1</li>
<li>
<strong>Typeface</strong>: <em>Bold</em>
</li>
</ol>
<p>After <strong>Add Text</strong> button is pressed, a text “Square
One”” will be rendered. However, we see that the text has been cutoff on
the right side because there is not enough plotting space. The X and Y
coordinates of the text refer to the position of the text’s center.</p>
<p>So, we use the slider <strong>Horizontal Position</strong> to
re-adjust the focus of the plotting space:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Horizontal Position</strong>: 8</li>
</ol>
<p><img src="hr_pos.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
</div>
<div class="section level3">
<h3 id="adding-self-loop-arrows">Adding Self-loop Arrows<a class="anchor" aria-label="anchor" href="#adding-self-loop-arrows"></a>
</h3>
<p><img src="add_loop.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<p>Finally, we can add a circular self-loop arrow on the plotting output
using these inputs below:</p>
<ol style="list-style-type: decimal">
<li>
<strong>X Coordinate (Center)</strong>: -5</li>
<li>
<strong>Y Coordiante (Center)</strong>: 5</li>
<li>
<strong>Radius</strong>: 2</li>
<li>
<strong>Line Width</strong>: 1</li>
<li>
<strong>Line Color</strong>: #000000</li>
<li>
<strong>Line Alpha</strong>: 1</li>
<li>
<strong>Arrow Type</strong>: <em>closed</em>
</li>
<li>
<strong>Arrow Size</strong>: 0.1</li>
<li>
<strong>Loop Width</strong>: 1</li>
<li>
<strong>Loop Height</strong>: 1</li>
</ol>
<p>This will generate the self-loop arrow on the left side after the
<strong>Add Self-loop Arrow</strong> button has been clicked.</p>
</div>
<div class="section level3">
<h3 id="saving-data-and-graphics">Saving Data and Graphics<a class="anchor" aria-label="anchor" href="#saving-data-and-graphics"></a>
</h3>
<p><img src="save_csv.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<p>Notice that whenever we add graphical element onto the plotting
space, the output table gets updated. There are four tables total: 1)
<strong>Points Table</strong>, 2) <strong>Lines Table</strong>, 3)
<strong>Annotations Table</strong>, and 4) <strong>Self-loop Arrows
Table</strong>. Users can directly manipulate the aesthetics of elements
by modifying the numiercal inputs in the table, such as x and Y
coordinates and alpha level. They can also save the CSV files, close the
<strong>ggsem</strong> app, and the load them again to continue working
on the figures later in the future.</p>
<p>To download each of the four tables, go down to the dropdown menu
<strong>Choose CSV to Download</strong>, and click the button
<strong>Download Selected CSV</strong>, for each of the four tables.</p>
<p>To reload the CSV files back into the app, users can click
<strong>Browse</strong> under <strong>Upload CSV Files</strong> to
locate their CSV files of their interest.</p>
<p>The output image can also exported as either PNG, JPEG, PDF or
SVG.</p>
<p><img src="upload_csv.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<div class="figure" style="text-align: left">
<img src="example_one.png" alt="This picture is the directly exported PNG output from the shiny app." width="90%"><p class="caption">
This picture is the directly exported PNG output from the shiny app.
</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="modifying-the-plot-from-ggsem-app-in-ggplot2-workflow">Modifying the Plot from <strong>ggsem</strong> app in
<strong>ggplot2</strong> Workflow<a class="anchor" aria-label="anchor" href="#modifying-the-plot-from-ggsem-app-in-ggplot2-workflow"></a>
</h2>
<p>The plot that we have generated can be recreated as a ggplot2 object
in RStudio using the function <code><a href="../reference/csv_to_ggplot.html">csv_to_ggplot()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/cowplot/" class="external-link">cowplot</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://smin95.github.io/ggsem">ggsem</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># CSV files from ggsem app</span></span>
<span><span class="va">points_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">'https://www.smin95.com/points.csv'</span><span class="op">)</span> </span>
<span><span class="va">lines_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">'https://www.smin95.com/lines.csv'</span><span class="op">)</span></span>
<span><span class="va">annotations_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">'https://www.smin95.com/annotations.csv'</span><span class="op">)</span></span>
<span><span class="va">loops_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">'https://www.smin95.com/loops.csv'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csv_to_ggplot.html">csv_to_ggplot</a></span><span class="op">(</span>points_data <span class="op">=</span> <span class="va">points_data</span>,</span>
<span>                    lines_data <span class="op">=</span> <span class="va">lines_data</span>,</span>
<span>                    annotations_data <span class="op">=</span> <span class="va">annotations_data</span>,</span>
<span>                    loops_data <span class="op">=</span> <span class="va">loops_data</span>,</span>
<span>                    zoom_level <span class="op">=</span> <span class="fl">1.2</span>, <span class="co"># From the ggsem app</span></span>
<span>                    horizontal_position <span class="op">=</span> <span class="fl">8</span>, <span class="co"># From the ggsem app</span></span>
<span>                    vertical_position <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="co"># Default verfical position on the app</span></span></code></pre></div>
<p>We can save the figure as a PNG file to verify whether it is
identical to the one we have drawn on the ggsem Shiny app. Here, we set
<code>width = 9</code> and <code>height = 9</code> as the dimension of
the exported image file.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">'p1.png'</span>, <span class="va">p1</span>, width <span class="op">=</span> <span class="fl">9</span>, height <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></span></code></pre></div>
<p><img src="p1.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
<p>We can also add a plot light-grey (<code>grey90</code>) background to
our graphical output using typical ggplot2 functions and change the
range of the y-axis.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>  plot.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"grey90"</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>  <span class="co"># Grey background, no border</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We can then save the figure again using <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">'p2.png'</span>, <span class="va">p2</span>, width <span class="op">=</span> <span class="fl">9</span>, height <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></span></code></pre></div>
<p><img src="p2.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
<p>We can also chip away the extra space by directly dealing with the
axis limits of the figure. First, we extract the current range of the
y-axis limit of the <code>p2</code> object.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_build</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot_build.html" class="external-link">ggplot_build</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></span>
<span><span class="va">plot_build</span><span class="op">$</span><span class="va">layout</span><span class="op">$</span><span class="va">panel_params</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">y.range</span> <span class="co"># y-axis range</span></span>
<span><span class="co">#&gt; [1] -26.4  26.4</span></span>
<span><span class="va">plot_build</span><span class="op">$</span><span class="va">layout</span><span class="op">$</span><span class="va">panel_params</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">x.range</span> <span class="co"># x-axis range</span></span>
<span><span class="co">#&gt; [1] -18.4  34.4</span></span></code></pre></div>
<p>The y-axis spans from -22 to 22. We can reduce the some space at the
top and bottom (y-axis range: -8 to 19). To do so, we will need to use
the function <code><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p2b</span> <span class="op">&lt;-</span> <span class="va">p2</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">8</span>,<span class="fl">19</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We can also modify the range of the x-axis slightly (-9 to 30).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p2c</span> <span class="op">&lt;-</span> <span class="va">p2b</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then, save the figure using <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">'p2c.png'</span>, <span class="va">p2c</span>, width <span class="op">=</span> <span class="fl">5.5</span>, height <span class="op">=</span> <span class="fl">2.3</span><span class="op">)</span></span></code></pre></div>
<p>We have successfully cropped out the empty space and recreated the
figure as it would appear on the Shiny app by only using the ggplot2
workflow.</p>
<p>The <code>height</code> and <code>width</code> arguments might need
to be tested for a few attempts to find the best ones (takes some
practice!). Essentially, <code><a href="../reference/csv_to_ggplot.html">csv_to_ggplot()</a></code> returns a ggplot2
object where the ratio has been fixed to 1, allowing the plots to appear
exactly the same as those from the Shiny app. However, when the x and y
limits must be changed in a <strong>ggplot2</strong> workflow (as in
this example), this ratio must be broken (by the function
<code><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian()</a></code>). This changes the relative spacing of
visual elements on the plot. So, the ratio has to be set again by
setting the <code>width</code> and <code>height</code> of the output
image file, which in here are <code>width = 5.5</code> and
<code>height = 2.3</code>.</p>
<p><strong>Tip:</strong> If your plot gets cut-off, either increase
<code>width</code> or <code>height</code> (or both) in
<code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave()</a></code>.</p>
<p><img src="p2c.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Seung Hyun Min.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
